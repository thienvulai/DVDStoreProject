DROP TABLE ITEM;
DROP TABLE LOGIN;
DROP TABLE CUSTOMER;
DROP TABLE BUYITEM;
DROP TABLE RENTITEM;
DROP TABLE RETURNITEM;

CREATE TABLE ITEM (
	ITEMID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	ITEMNAME VARCHAR(50),
	NBRITEM INTEGER,
	PRICE DOUBLE,
	CATEGORY VARCHAR(1024),
	IMAGE BLOB,
	CONSTRAINT ITEM_PK PRIMARY KEY (ITEMID)
);

CREATE TABLE LOGIN (
	LOGINID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	USERNAME VARCHAR(50),
	PASSWORD VARCHAR(50),
	TYPEOFROLE VARCHAR(50),
	CONSTRAINT LOGIN_PK PRIMARY KEY (LOGINID)
);

CREATE TABLE CUSTOMER (
	CUSTOMERID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	FIRSTNAME VARCHAR(50),
	LASTNAME VARCHAR(50),
	PHONE VARCHAR(15),
	EMAIL VARCHAR(30),
	STREET VARCHAR(30),
	SUBURB VARCHAR(30),
	CUSTOMERSTATE VARCHAR(10),
	LOGINID BIGINT,
	
	CONSTRAINT CUSTOMER_PK PRIMARY KEY (CUSTOMERID),
	CONSTRAINT CUSTOMER_LOGIN_FK FOREIGN KEY (LOGINID)
		REFERENCES LOGIN (LOGINID)
);

CREATE TABLE RENTITEM (
	RENTITEMID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	RECEIPTNBR VARCHAR(50),
	DISCOUNT DOUBLE,
	DATERENT DATE,
	DATERETURN DATE,
	QUANTITY INTEGER,
	DAYOFRENT INTEGER,
	STATUS VARCHAR(30),
	CUSTOMERID BIGINT,
	ITEMID BIGINT,
	
	CONSTRAINT RENTITEM_PK PRIMARY KEY (RENTITEMID),
	CONSTRAINT RENTITEM_CUSTOMER_FK FOREIGN KEY (CUSTOMERID)
		REFERENCES CUSTOMER (CUSTOMERID),
	CONSTRAINT RENTITEM_ITEM_FK FOREIGN KEY (ITEMID)
		REFERENCES ITEM (ITEMID)
);

CREATE TABLE BUYITEM (
	BUYITEMID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	RECEIPTNBR VARCHAR(50),
	DATEBUYITEM DATE,	
	QUANTITY INTEGER,
	PRICE DOUBLE,
	DISCOUNT DOUBLE,
	FULLPRICE DOUBLE,
	TOTALPAID DOUBLE,
	CUSTOMERID BIGINT,
	ITEMID BIGINT,
	
	CONSTRAINT BUYITEM_PK PRIMARY KEY (BUYITEMID),
	CONSTRAINT BUYITEM_CUSTOMER_FK FOREIGN KEY (CUSTOMERID)
		REFERENCES CUSTOMER (CUSTOMERID),
	CONSTRAINT BUYITEM_ITEM_FK FOREIGN KEY (ITEMID)
		REFERENCES ITEM (ITEMID)
);

CREATE TABLE RETURNITEM (
	RETURNITEMID BIGINT NOT NULL GENERATED ALWAYS AS IDENTITY,
	DATERETURNITEM DATE,	
	NBROFDAYLATE INTEGER,
	PAIDFIRE DOUBLE,
	TOTALPAID DOUBLE,
	RENTITEMID BIGINT,
	
	CONSTRAINT RETURNITEM_PK PRIMARY KEY (RETURNITEMID),
	CONSTRAINT RETURNITEM_RENTITEM_FK FOREIGN KEY (RENTITEMID)
		REFERENCES RENTITEM (RENTITEMID)
);